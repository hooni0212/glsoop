<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>관리자 페이지 | 글숲</title>

  <!-- Google Fonts: 사이트에서 사용할 폰트들 로드 -->
  <link
    href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&display=swap"
    rel="stylesheet"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap"
    rel="stylesheet"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700&display=swap"
    rel="stylesheet"
  />

  <!-- Bootstrap CSS: 레이아웃 / 기본 컴포넌트 스타일 -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- 커스텀 공통 스타일(main.css) -->
  <!-- admin.html은 /html 폴더 안에 있으므로 ../로 상위 폴더 접근 -->
  <link rel="stylesheet" href="/css/base.css">
  <link rel="stylesheet" href="/css/components.css">
</head>
<body>
  <!-- 상단 네비게이션 바 -->
  <nav class="navbar navbar-expand-lg navbar-dark custom-navbar fixed-top nav-height">
    <div class="container">
      <!-- 로고(클릭 시 메인으로 이동) -->
      <a class="navbar-brand" href="/index.html">글숲</a>

      <!-- 모바일 토글 버튼 -->
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- 네비게이션 링크 영역 -->
      <div class="collapse navbar-collapse" id="navbarNav">
        <!-- 로그인 전 노출되는 메뉴 -->
        <ul class="navbar-nav ms-auto before-login">
          <li class="nav-item">
            <a class="nav-link" href="/html/login.html">로그인</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/html/signup.html">회원가입</a>
          </li>
        </ul>

        <!-- 로그인 후 노출되는 메뉴 (기본은 display:none; → header.js에서 토글) -->
        <ul class="navbar-nav ms-auto after-login" style="display: none;">
          <li class="nav-item">
            <!-- 로그인한 사용자 이름 표시 -->
            <span class="nav-link" id="navUserName"></span>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/html/mypage.html">마이페이지</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/html/editor.html">글쓰기</a>
          </li>
          <li class="nav-item">
            <!-- 로그아웃 버튼 (header.js에서 이벤트 등록) -->
            <button
              class="btn btn-outline-light ms-2"
              id="logoutBtn"
              type="button"
            >
              로그아웃
            </button>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- 관리자 페이지 메인 섹션 -->
  <!-- nav-height만큼 위에 고정된 네비게이션이 있으므로 py-5 + mt-5로 여백 확보 -->
  <section class="py-5 mt-5">
    <div class="container" style="max-width: 900px;">
      <h2 class="mb-4">관리자 페이지</h2>

      <!-- 관리자 상태 영역 -->
      <!-- /api/me 요청 결과에 따라 관리자 여부 / 안내 문구 보여줌 -->
      <div id="adminStatus" class="mb-3">
        <p class="text-muted">접근 권한을 확인하는 중입니다...</p>
      </div>

      <!-- 실제 관리자 내용(회원/글 관리) -->
      <!-- 기본은 display:none; → admin.js에서 관리자 확인 후 표시 -->
      <div id="adminContent" style="display:none;">
        <p class="mb-3 text-muted">
          회원과 게시글을 이 페이지에서 관리할 수 있습니다.
        </p>

        <!-- 회원 관리 섹션 -->
        <div class="mb-4">
          <h4 class="mb-3">회원 관리</h4>
          <!-- 회원 목록 테이블이 JS로 렌더링되는 영역 -->
          <div id="adminUsers">
            <p class="text-muted">회원 목록을 불러오는 중입니다...</p>
          </div>
        </div>

        <!-- 회원 관리와 글 관리 사이 구분선 -->
        <hr class="my-4" />

        <!-- 글 관리 섹션 -->
        <div>
          <h4 class="mb-3">글 관리</h4>
          <!-- 관리자용 글 카드 목록이 JS로 렌더링되는 영역 -->
          <div id="adminPosts">
            <p class="text-muted">글 목록을 불러오는 중입니다...</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 공통 푸터 -->
  <footer class="custom-footer">
    <div class="container py-4 py-md-5">
      <div class="row gy-3 align-items-center">
        <!-- 왼쪽: 브랜드 / 짧은 문구 -->
        <div class="col-md-4 text-center text-md-start">
          <div class="footer-brand">글숲</div>
          <p class="footer-subtitle">마음을 나누는 작은 숲</p>
        </div>

        <!-- 가운데: 주요 링크 -->
        <div class="col-md-4 text-center">
          <ul class="footer-links list-inline mb-0">
            <li class="list-inline-item"><a href="/index.html">홈</a></li>
            <li class="list-inline-item"><a href="/html/mypage.html">마이페이지</a></li>
            <li class="list-inline-item"><a href="/html/editor.html">글쓰기</a></li>
          </ul>
        </div>

        <!-- 오른쪽: 카피라이트 / 한 줄 문구 -->
        <div class="col-md-4 text-center text-md-end">
          <p class="footer-copy">&copy; 2025 글숲. All rights reserved.</p>
          <p class="footer-small">조용히 머물다 가는 공간을 함께 가꿔요.</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- 공통 유틸 JS (escapeHtml, maskEmail 등) -->
  <script src="/js/utils.js"></script>

  <!-- Bootstrap JS (드롭다운, 모달, 토글 버튼 등 동작에 필요) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- 헤더 로그인/로그아웃 상태 업데이트 스크립트 -->
  <!-- admin.html이 /html 안에 있으므로 ../js/header.js 경로 사용 -->
  <script src="../js/header.js"></script>

  <!-- 관리자 페이지 전용 스크립트 (관리자 권한 체크 + 유저/글 관리) -->
  <script src="../js/admin.js"></script>
</body>
</html>

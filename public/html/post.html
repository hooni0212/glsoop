<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>글숲 - 글 상세</title>

  <!-- Google Fonts: 사이트 공통 폰트들 -->
  <link
    href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&display=swap"
    rel="stylesheet"
  >
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap"
    rel="stylesheet"
  >
  <link
    href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700&display=swap"
    rel="stylesheet"
  />

  <!-- Bootstrap CSS: 레이아웃/컴포넌트 기본 스타일 -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >

  <!-- Custom CSS -->
  <!-- post.html은 /html 폴더 안에 있으므로 절대 경로(/css/...) 사용 -->
  <link rel="stylesheet" href="/css/main.css">
</head>
<body>
  <!-- 상단 헤더 네비게이션 -->
  <nav class="navbar navbar-expand-lg navbar-dark custom-navbar fixed-top nav-height">
    <div class="container">
      <!-- 로고: 클릭 시 메인 피드로 이동 -->
      <a class="navbar-brand" href="/index.html">글숲</a>

      <!-- 모바일 토글 버튼 (햄버거 버튼) -->
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- 네비게이션 메뉴 영역 -->
      <div class="collapse navbar-collapse" id="navbarNav">
        <!-- 로그인 전 표시되는 메뉴 -->
        <!-- header.js → /api/me 결과에 따라 before-login / after-login 토글 -->
        <ul class="navbar-nav ms-auto before-login">
          <li class="nav-item">
            <a class="nav-link" href="/html/login.html">로그인</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/html/signup.html">회원가입</a>
          </li>
        </ul>

        <!-- 로그인 후 표시되는 메뉴 -->
        <ul class="navbar-nav ms-auto after-login" style="display: none;">
          <!-- 로그인한 사용자 이름 (예: 홍길동님) -->
          <li class="nav-item">
            <span class="nav-link" id="navUserName"></span>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/html/mypage.html">마이페이지</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/html/editor.html">글쓰기</a>
          </li>
          <li class="nav-item">
            <!-- 로그아웃 버튼: header.js에서 클릭 이벤트 처리 -->
            <button
              class="btn btn-outline-light ms-2"
              id="logoutBtn"
              type="button"
            >
              로그아웃
            </button>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- 개별 글 상세 보기 섹션 -->
  <!-- post.js → initPostDetailPage()에서 localStorage의 glsoop_lastPost를 읽어
       #postDetail 안에 상세 카드 HTML을 렌더링 -->
  <section class="page-section">
    <div class="container" style="max-width: 900px;">
      <h3 class="mb-3">글 상세</h3>
      <div id="postDetail">
        <!-- JS 로딩 전 기본 안내 문구 -->
        <p class="text-muted">글을 불러오는 중입니다...</p>
      </div>
    </div>
  </section>

  <!-- 현재 글 기준으로 서버에서 추천되는 "관련된 글" 섹션 -->
  <!-- post.js → loadRelatedPosts() / renderRelatedPosts()에서 #relatedPosts 채움 -->
  <section class="page-section">
    <div class="container" style="max-width: 900px;">
      <h4 class="mb-3">관련된 글</h4>
      <div id="relatedPosts">
        <!-- JS 로딩 전 기본 안내 문구 -->
        <p class="text-muted">관련 글을 불러오는 중입니다...</p>
      </div>
    </div>
  </section>

  <!-- 하단 푸터 -->
  <footer class="custom-footer">
    <div class="container py-4 py-md-5">
      <div class="row gy-3 align-items-center">
        <!-- 좌측: 브랜드와 짧은 슬로건 -->
        <div class="col-md-4 text-center text-md-start">
          <div class="footer-brand">글숲</div>
          <p class="footer-subtitle">마음을 나누는 작은 숲</p>
        </div>

        <!-- 중앙: 빠른 링크 -->
        <div class="col-md-4 text-center">
          <ul class="footer-links list-inline mb-0">
            <li class="list-inline-item"><a href="/index.html">홈</a></li>
            <li class="list-inline-item"><a href="/html/mypage.html">마이페이지</a></li>
            <li class="list-inline-item"><a href="/html/editor.html">글쓰기</a></li>
          </ul>
        </div>

        <!-- 우측: 카피라이트 문구 -->
        <div class="col-md-4 text-center text-md-end">
          <p class="footer-copy">&copy; 2025 글숲. All rights reserved.</p>
          <p class="footer-small">조용히 머물다 가는 공간을 함께 가꿔요.</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- JS 로딩 순서 -->
  <!-- 1) 공통 유틸 함수 (escapeHtml, 날짜 포맷, 글귀 폰트 autoAdjustQuoteFont 등) -->
  <script src="/js/utils.js"></script>
  <!-- 2) Bootstrap JS 번들 (모달, 드롭다운, 네비 토글 등) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- 3) 헤더 로그인 상태 처리 스크립트 (/api/me로 before/after-login 토글) -->
  <script src="/js/header.js"></script>
  <!-- 4) 글 상세 페이지 전용 스크립트
         - URL ?postId=...
         - localStorage의 glsoop_lastPost 사용
         - #postDetail, #relatedPosts 렌더링 -->
  <script src="/js/post.js"></script>
</body>
</html>
